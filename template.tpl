___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "CLIENT",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Facebook Conversions API Client",
  "brand": {
    "id": "brand_dummy",
    "displayName": "Facebook",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAOvUlEQVR4Xu3dbWiWBd/H8d/m5unjHOZ8rj1ooRNdyig1pXxR5gNiYUUoWWap6VLCB3AgsVaRleaEutDohaJUKImKU8QMq+k0zNZMwxRHjpS5zdk2nOfY7hf3dd903dxe/9OubefxP/b9vPGFv+MAT9nX02PnjiNBUqsAIPhaE60FAAQFwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4AbBAuAGwQLgBsEC4EaSNfAmKytLmzdvVo8ePawp/o/Gxkbl5eXp0qVL1vSuZWdna8OGDYpEItbUhWg0qvr6etXV1en69euqrq7WlStXdOXKFV2+fFlVVVVqaGiwToO7FLpgLVmyRNOnT7dmuIPy8nKtWbPGmt21devWaerUqdYsVCorK3X27FmdOHFC33//vUpKSlRfX28dhn8jdMFKSgrdH6lDtdc7oPY6b5ANGTJEQ4YM0RNPPCFJampq0qlTp3TmzBl9+eWXKi0t1e3bt63T4C+4hgV0kEgkokmTJmnZsmU6duyYzp49q/z8fOXk5FiH4p8IFhAnw4cPV2FhoU6fPq2vvvpKTzzxhBIT+ZL8d3h1gDhLTEzU7NmzdejQIX377bcaNWqUdUinRbCAAJk4caLKysq0efNm9e/f35p3OgQLCJjExEQtW7ZMhw8f1qOPPmrNOxWCBQTUmDFjVFxcrEWLFqlLly7WvFMgWECAde/eXZ988ony8vKsaadAsICAS0hI0MaNG7Vu3TprGnoEC3AiPz9fL7zwgjULNYIFONG1a1dt3LhRDzzwgDUNLYIFONK3b1/t2LHDmoUWwQKcyc3N1fz5861ZKBEswKHCwkL169fPmoUOwcK/qKursyYIgKFDh2r27NnWLHS4F8sdnD9/Xl988YU1C5Wqqir94x//sGZxtWnTJq1YscKatasePXqod+/eGjBggAYPHqz77rtPY8eO1YgRI5Senq7MzEzrFG1iyZIl+vTTT61ZqBCsO/j111/15ptvWjN0Qo2NjWpsbNS1a9dUVlb2L7+XnJys0aNHa968eXr66aeVnp5+x/P8p8aNG6ecnBz99NNP1jQ0+C8h0Iai0ahOnz6tN954Q6NGjdLzzz+vCxcuWIf9bc8995w1CRWCBbSThoYGff755xo/frzeffdda/63jBkzxpqECsEC2llNTY3Wrl2rRYsWWdO7lpOT06luP02wgA6yZcsWLV++XK2trdY0ZgMHDmzX62RBQ7CADlRUVKTi4mJrFrOkpCSNHDnSmoUGwQI6WH5+vlpaWqxZzAYNGmRNQoNgAR3szJkzOnTokDWLWVpamjUJDYIFxME333xjTWLWs2dPaxIaBAuIg7YMVrdu3axJaBAsIA4qKira7LH1N27csCahQbCAOKirq2uzYN26dcuahAbBAuKgqampzUJTWVlpTUKDYAFxkJSUpOTkZGsWk8uXL1uT0CBYQBxEIhH17t3bmplu376t8+fPW7PQIFhAHAwYMKBNgvXbb7+pqqrKmoUGwQLiIDc3VwkJCdbMVFpaak1ChWABcTBjxgxrEpOjR49ak1AhWEAHS01N1ZQpU6yZ6erVq9q7d681CxWCBXSwxYsXa+jQodbMtHfv3k730BCCBXSgjIwMrVq1ypqZotGoNm3aZM1Ch2ABHSQjI0NHjx5V3759ralpw4YN+uWXX6xZ6BAsoAPk5OSouLhYGRkZ1tRUWVmpt956y5qFEsEC2lG/fv1UUFCgkydPasSIEdbcVFNTo2effVYNDQ3WNJR4LiHQDh566CFNmzZNCxcubJML7P/j7bffVklJiTULLYJ1B0lJSUpNTbVmLtTX16u5udma4W9KTExURkaGJkyYoNzcXM2aNUtZWVnWYXft5Zdf1meffWbNQo1g3cGMGTNUW1trzVy4evWq7r///ja7nUk8zZo1q02uA/1dSUlJ6tmzp1JSUpSamvq/vyYltd+XUkNDg1577TVt27bNmoZe+73KCIyBAwdqypQp2rdvnzUNvMzMTGVmZlqz0CgrK9PChQt16tQpa9opcNG9k+jSpYs1QYDU1tbqgw8+0IQJE4jVX/AOCwiQlpYW7dmzR6tWrdKlS5eseadDsIAAuHnzprZt26bCwkJdu3bNmndaBAuIo6+//lpbtmzRvn371NjYaM07PYIFxNHkyZOVkpKiRx55RMePH9ehQ4dUU1NjHdZpcdEdiKPk5GTl5uYqLy9PO3fuVEVFhbZv364nn3yyTe5IGjYECwiQXr16ad68eSouLlZZWZny8vII118QLCCgMjIyVFRUpB9//FH5+fmKRCLWIaFHsICAGzZsmAoLC3X8+HFNnTrVmocawQKcGDt2rIqLi/Xee+8pJSXFmocSwQIcSUhI0OrVq7V//34NGTLEmocOwQIcmjx5sr777jsNHz7cmoYKwQKcysjI0MGDB5Wenm5NQ4NgdRJNTU3WBA4NGzZMxcXF6tatmzUNBT7p3glcu3ZNZWVl1syFCxcuBO7hCz179lRSUpL69OmjlJQU9enTp93vkfVXI0eO1Pbt2/XMM89YU/c65hV16MCBA5o7d641c6Gurk6tra3WzIUDBw5oxYoV1izuEhMTde+99yo7O1sTJ07UY489pvHjx7dbxObMmaMFCxaE/o6k7fPqhUA0GtWNGzesGfD/amlpUUVFhSoqKlRcXCxJSktL08MPP6ylS5dq6tSpSkhIsE5zVwoLC3X48GH9/vvv1tQtrmEBHaSqqkr79+/XtGnTNGnSJJ08edI65K4MGjRICxYssGauESwgDkpKSjR+/HgtX768TR/ZtXLlSvXv39+auUWwgDhpbW1VUVGRXnzxRd2+fduax6RXr156/fXXrZlbBAuIs127dmnt2rXWLGZz5sxR165drZlLBAsIgA8//FB79+61ZjHJysrSgw8+aM1cIlhAQBQVFSkajVozU3Jysp566ilr5hLBAgLi2LFjKi8vt2Yxefzxx9v8YxNBQLCAgIhGo9qzZ481i0l2dnYov1tIsIAAOXHihDWJSffu3ZWWlmbN3CFYQIBcvHjRmsQsMzPTmrhDsIAAqaursyYxGzZsmDVxh2ABAdLc3GxNYjZgwABr4g7BAgIkOTnZmsSsT58+1sQdggUESFtGpnv37tbEHYIFBEh2drY1idmtW7esiTsECwiQKVOmWJOY3bx505q4Q7CAgEhOTtbMmTOtWcyuXLliTdwhWEBAzJw5s00f23Xp0iVr4g7BAgIgEolo5cqV1uyuVFVVWRN3CBYQAIWFhZo4caI1i1lTU5MuXLhgzdzhIRRAHCUkJGjdunVt/u7qhx9+UG1trTVzh2ABcZKamqoNGzbopZdesqZ37eDBg9bEJYIFdLD+/ftr9uzZKigoaJcfn2lpadGuXbusmUsEC+gAKSkpGjdunObOnavp06dr8ODB1iF/W2lpqc6fP2/NXCJYQBtITExUSkqKUlJSNHjwYKWnpysrK0sjR47U5MmTlZGRYZ2izYT56c8EC64sXrxY8+fPt2YdJhKJBOpn9srLy7Vt2zZr5hbBgiuRSESRSMSadVqbN29us2ccBhGfwwJCoqSkRFu3brVmrhEsIARu3LihV199Va2trdbUNYIFhMDSpUt19uxZa+YewQKcW79+vXbu3GnNQoFgAY69//77WrNmjTULDYIFOLVp0yatXr3amoUKwQKc+fPPP/XKK69oxYoV1jR0+BwW4Mi5c+e0cOFClZSUWNNQ4h0W4EBtba3Wr1+v0aNHd9pYiXdYQLBFo1Ht3r1bBQUFOnfunDUPPYIFBFBzc7O2bt2qjz/+WOXl5da80yBYQEA0NTWptLRUO3bs0O7du1VdXW0d0ukQLCCOampqdOTIEZ04cUL79u0L5X3Y21LoghWNRq1JTML41Nx44vX87zuBXr58WcePH9fp06d15MgR/fzzz2ppabEOxT+FLlgfffSRxo0bp3vuucea3tH169dVUFBgzXAX3nnnHaWlpf1Hfy9BVV9fr+bmZt26dUsNDQ2qrq5WTU2N/vjjD1VWVurixYu6evWqqqur2+wf1M4qQVK4f7wbQFi08jksAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbhAsAG4QLABuECwAbiRJarVGABAArf8FdOcwYe3MMuYAAAAASUVORK5CYII\u003d"
  },
  "description": "A server-side client template that listens and translates event information from the Facebook Pixel Library.",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[]


___SANDBOXED_JS_FOR_SERVER___

// Imports for Sandboxed Javascript.
const claimRequest = require('claimRequest');
const returnResponse = require('returnResponse');
const getRemoteAddress = require('getRemoteAddress');
const getRequestHeader = require('getRequestHeader');
const getRequestMethod = require('getRequestMethod');
const getRequestBody = require('getRequestBody');
const getRequestQueryParameters = require('getRequestQueryParameters');
const getRequestPath = require('getRequestPath');
const setPixelResponse = require('setPixelResponse');
const runContainer = require('runContainer');
const logToConsole = require('logToConsole');
const makeInteger = require('makeInteger');
const JSON = require('JSON');

const requestPath = getRequestPath();

// Processing unit for Phase 1 events fired from fbevents.js
if(requestPath === '/tr') {
  let params;

  if(getRequestMethod() == 'POST'){
    params = JSON.parse(getRequestBody());
  } else{
    params = getRequestQueryParameters();
  }

  logToConsole('Processing /tr event. Request:' + JSON.stringify(params));

  claimRequest();
  const eventModel = {};
  eventModel.event_name = params.ev;
  eventModel.event_time = makeInteger(params.ts/1000);
  eventModel.event_id = params.eid;
  eventModel.page_location = params.dl;
  if(params.test_event_code) eventModel.test_event_code = params.test_event_code;

  // Based on GTM common event data parameters -- https://developers.google.com/tag-manager/serverside/common-event-data
  eventModel.ip_override = getRemoteAddress();
  eventModel.user_agent = getRequestHeader('user-agent');


  // Mapping Facebook specific cookies
  if(params.fbp) eventModel['x-fb-ck-fbp'] = params.fbp;
  if(params.fbc) eventModel['x-fb-ck-fbc'] = params.fbc;

  // Mapping Facebook AAM parameters as customer information parameters.
  // For more details on Advanced matching parameters : https://developers.facebook.com/docs/facebook-pixel/advanced/advanced-matching/
  if(params['ud[em]']) eventModel['x-fb-ud-em'] = params['ud[em]'];
  if(params['ud[ph]']) eventModel['x-fb-ud-ph'] = params['ud[ph]'];
  if(params['ud[fn]']) eventModel['x-fb-ud-fn'] = params['ud[fn]'];
  if(params['ud[ln]']) eventModel['x-fb-ud-ln'] = params['ud[ln]'];
  if(params['ud[ge]']) eventModel['x-fb-ud-ge'] = params['ud[ge]'];
  if(params['ud[db]']) eventModel['x-fb-ud-db'] = params['ud[db]'];
  if(params['ud[ct]']) eventModel['x-fb-ud-ct'] = params['ud[ct]'];
  if(params['ud[st]']) eventModel['x-fb-ud-st'] = params['ud[st]'];
  if(params['ud[zp]']) eventModel['x-fb-ud-zp'] = params['ud[zp]'];
  if(params['ud[cn]']) eventModel['x-fb-ud-country'] = params['ud[cn]'];
  if(params['ud[external_id]']) eventModel['x-fb-ud-external_id'] = params['ud[external_id]'];
  if(params['cd[subscription_id]']) eventModel['x-fb-ud-subscription_id'] = params['cd[subscription_id]'];

  // Mapping custom data parameters
  if(params['cd[value]']) eventModel.value = params['cd[value]'];
  if(params['cd[currency]']) eventModel.currency = params['cd[currency]'];
  if(params['cd[search_string]']) eventModel.search_term = params['cd[search_string]'];

  if(params['cd[content_category]']) eventModel['x-fb-cd-content_category'] = params['cd[content_category]'];
  if(params['cd[content_ids]']) eventModel['x-fb-cd-content_ids'] = params['cd[content_ids]'];
  if(params['cd[content_name]']) eventModel['x-fb-cd-content_name'] = params['cd[content_name]'];
  if(params['cd[content_type]']) eventModel['x-fb-cd-content_type'] = params['cd[content_type]'];
  if(params['cd[contents]']) eventModel['x-fb-cd-contents'] = params['cd[contents]'];
  if(params['cd[num_items]']) eventModel['x-fb-cd-num_items'] = params['cd[num_items]'];
  if(params['cd[predicted_ltv]']) eventModel['x-fb-cd-predicted_ltv'] = params['cd[predicted_ltv]'];
  if(params['cd[status]']) eventModel['x-fb-cd-status'] = params['cd[status]'];
  if(params['cd[delivery_category]']) eventModel['x-fb-cd-delivery_category'] = params['cd[delivery_category]'];


  // Starts the  container to run the tag.
  runContainer(eventModel, () => {
    // on success callback sends standard response.
    setPixelResponse();
    returnResponse();
  });

  logToConsole('Processed /tr event!');
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "return_response",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_response",
        "versionId": "1"
      },
      "param": [
        {
          "key": "writeResponseAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "writeHeaderAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "run_container",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: On /tr request, Client runs container and generates eventModel tr fields mapped
  code: |-
    // Act
    runCode(mockConfigurationData);

    // Assert
    assertThat(actualEventModel).isEqualTo(expectedEventModel);
    assertApi('getRemoteAddress').wasCalled();
    assertApi('claimRequest').wasCalled();
    assertApi('getRequestHeader').wasCalledWith('user-agent');
    assertApi('getRequestPath').wasCalled();
    assertApi('getRequestQueryParameters').wasCalled();
    assertApi('setPixelResponse').wasCalled();
    assertApi('returnResponse').wasCalled();
- name: On Http Post requset, Client processes the request body and generates eventModel
  code: |-
    mock('getRequestMethod', () => {
      return 'POST';
    });

    mock('getRequestBody', () => {
      return JSON.stringify(testTrackingRequest);
    });

    // Act
    runCode(mockConfigurationData);

    // Assert
    assertThat(actualEventModel).isEqualTo(expectedEventModel);
    assertApi('getRequestMethod').wasCalled();
- name: On /collect request, Facebook Client does not claim Request
  code: |-
    mock('getRequestPath', () => {
      return '/collect';
    });

    // Act
    runCode(mockConfigurationData);

    // Assert
    assertApi('claimRequest').wasNotCalled();
    assertApi('runContainer').wasNotCalled();
- name: On Non-matching route request, Facebook Client does not claim Request
  code: |-
    mock('getRequestPath', () => {
      return '/non-matching-route';
    });

    // Act
    runCode(mockConfigurationData);

    // Assert
    assertApi('claimRequest').wasNotCalled();
    assertApi('runContainer').wasNotCalled();
setup: |-
  // Arrange
  const makeInteger = require('makeInteger');
  const JSON = require('JSON');

  const mockConfigurationData = {
    'config': 'value'
  };

  const testData = {
    event_name : 'test_event_name',
    time_stamp : 123456789,
    event_id : '1234',
    dl: 'www.example.com/foo.html',
    ip_address : '1.2.3.4',
    user_agent : 'test_browser_agent',
    email : 'foo@bar.com',
    phone_number: '123',
    first_name: 'foo',
    last_name: 'bar',
    gender: 'm',
    date_of_birth: '19910526',
    city: 'menlopark',
    state: 'ca',
    zip: '12345',
    country: 'us',
    external_id: 'user123',
    subscription_id: 'abc123',
    currency: 'usd',
    value: '123',
    content_category: 'product',
    content_ids: ['ABC123', 'XYZ789'],
    content_name: 'SampleItem',
    content_type: 'product',
    contents: [{'id': 'ABC123', 'quantity': 2}, {'id': 'XYZ789', 'quantity': 2}],
    num_items: 4,
    predicted_ltv: 101,
    search_string: 'query',
    status: 'subscribed',
    delivery_category: 'in_store',
    test_event_code: '123',
  };

  const testTrackingRequest = {
    ev: testData.event_name,
    ts: testData.time_stamp,
    eid: testData.event_id,
    test_event_code: testData.test_event_code,
    dl: testData.dl,
    'ud[em]' : testData.email,
    'ud[ph]' : testData.phone_number,
    'ud[fn]' : testData.first_name,
    'ud[ln]' : testData.last_name,
    'ud[ge]' : testData.gender,
    'ud[db]' : testData.date_of_birth,
    'ud[ct]' : testData.city,
    'ud[st]' : testData.state,
    'ud[zp]' : testData.zip,
    'ud[cn]' : testData.country,
    'ud[external_id]' : testData.external_id,
    'cd[currency]' : testData.currency,
    'cd[value]' : testData.value,
    'cd[content_category]' : testData.content_category,
    'cd[content_ids]' : testData.content_ids,
    'cd[content_name]' : testData.content_name,
    'cd[content_type]' : testData.content_type,
    'cd[contents]' : testData.contents,
    'cd[num_items]' : testData.num_items,
    'cd[predicted_ltv]' : testData.predicted_ltv,
    'cd[search_string]' : testData.search_string,
    'cd[status]' : testData.status,
    'cd[delivery_category]' : testData.delivery_category,
    'cd[subscription_id]' : testData.subscription_id,
  };

  const expectedEventModel = {
    'event_name': testData.event_name,
    'event_time': makeInteger(testData.time_stamp/1000),
    'event_id': testData.event_id,
    'page_location': testData.dl,
    'ip_override': testData.ip_address,
    'user_agent': testData.user_agent,
    'test_event_code': testData.test_event_code,

    // user data section
    'x-fb-ud-em': testData.email,
    'x-fb-ud-ph': testData.phone_number,
    'x-fb-ud-ln': testData.last_name,
    'x-fb-ud-fn': testData.first_name,
    'x-fb-ud-ge': testData.gender,
    'x-fb-ud-db': testData.date_of_birth,
    'x-fb-ud-ct': testData.city,
    'x-fb-ud-st': testData.state,
    'x-fb-ud-zp': testData.zip,
    'x-fb-ud-country': testData.country,
    'x-fb-ud-external_id': testData.external_id,
    'x-fb-ud-subscription_id': testData.subscription_id,

    // common custom data fields that are defined already
    'currency': testData.currency,
    'value': testData.value,
    'search_term': testData.search_string,

    // Fields that don't have a mapping already will be defined as fb specific.
    'x-fb-cd-content_category': testData.content_category,
    'x-fb-cd-content_ids': testData.content_ids,
    'x-fb-cd-content_name': testData.content_name,
    'x-fb-cd-content_type': testData.content_type,
    'x-fb-cd-contents': testData.contents,
    'x-fb-cd-num_items': testData.num_items,
    'x-fb-cd-predicted_ltv': testData.predicted_ltv,
    'x-fb-cd-status': testData.status,
    'x-fb-cd-delivery_category': testData.delivery_category,
  };

  mock('getRequestPath', () => {
    return '/tr';
  });

  mock('getRemoteAddress', () => {
    return testData.ip_address;
  });

  mock('getRequestHeader', header => {
    if(header === 'user-agent') return testData.user_agent;
  });

  mock('getRequestPath', () => {
    return '/tr';
  });

  mock('getRequestQueryParameters', () => {
    return testTrackingRequest;
  });

  mock('claimRequest', () => {
    return {};
  });

  mock('setPixelResponse');
  mock('returnResponse');
  mock('claimRequest');


  let actualEventModel;
  mock('runContainer', (calledEventModel, onComplete) => {
      actualEventModel = calledEventModel;
      onComplete();
    });


___NOTES___

Created on 8/5/2020, 10:20:28 AM
